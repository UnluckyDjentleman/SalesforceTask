"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConvertContext = void 0;
const recompositionFinalizer_1 = require("./recompositionFinalizer");
const nonDecompositionFinalizer_1 = require("./nonDecompositionFinalizer");
const decompositionFinalizer_1 = require("./decompositionFinalizer");
const transactionFinalizer_1 = require("./transactionFinalizer");
/**
 * A state manager over the course of a single metadata conversion call.
 */
class ConvertContext {
    constructor() {
        this.decomposition = new decompositionFinalizer_1.DecompositionFinalizer();
        this.recomposition = new recompositionFinalizer_1.RecompositionFinalizer();
        this.nonDecomposition = new nonDecompositionFinalizer_1.NonDecompositionFinalizer();
    }
    // eslint-disable-next-line @typescript-eslint/require-await
    async *executeFinalizers(defaultDirectory) {
        for (const member of Object.values(this)) {
            if (member instanceof transactionFinalizer_1.ConvertTransactionFinalizer) {
                yield member.finalize(defaultDirectory);
            }
        }
    }
}
exports.ConvertContext = ConvertContext;
//# sourceMappingURL=convertContext.js.map